#!/usr/bin/env ruby

require 'rubygems'
require 'open-uri'
require 'zlib'
require 'yajl'
require 'json'

# CreateEvent - 10 points if its a new repo
# ForkEvent - 5 points if a repo is forked
# MemberEvent - 3 points when a repo has a member added
# PullRequestEvent - 2 point when a pull request is closed & merged
# WatchEvent - 1 point for the repo when the repo is watched
# IssuesEvent - 1 points when the repo has an issue created

gz = open('http://data.githubarchive.org/2017-01-01-12.json.gz')
js = Zlib::GzipReader.new(gz).read

repos = {}

Yajl::Parser.parse(js) do |event|
  
  next unless ["PushEvent", "ForkEvent"].include?(event["type"])
  
  repo_name = event["repo"]["name"]
  
  repos[repo_name] ||= { points: 0 }
  
end

puts repos.first(5)


 